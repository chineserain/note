---
title: 说明书草稿
tags: 专利,草稿,小书匠
grammar_cjkRuby: true
---
## 使用微信小程序的热水器远程控制系统

### 发明内容
本发明的目的旨在至少能在一定程度上解决上述问题。
为此，本发明的目的在于提出一种可以使用微信小程序的热水器远程只能控制系统，采集用户使用数据，在云端分析，提供建议的使用策略，以达到保证热水温度的舒适性、热水器工作在比较节能的状态下的目的。
为达到上述目的，本发明提出了一种使用微信小程序的热水器远程控制系统，包括以下内容：
微控制器，人机交互模块，无线模块，温度传感器，液位传感器以及被驱动器件等电气组件。其中无线模块有全球唯一的MAC地址（媒体设备的硬件地址），模块被用户注册后，服务器中的数据库与微信账号映射为一组控制逻辑。
微控制器对本地负责采集传感器数据，驱动继电器，及人机交互逻辑；对外处理无线模块接收来的控制字，并将本地状态传递给无线模块，以便转换成待返回的状态字。
热水器的状态字和用户的控制字是多字节可变长度的数据协议。控制字是用户在微信小程序内，根据算法生成的一组16进制数据，其首字节为固定数据，表示开始一个新的控制字，有查询、修改等控制方式；第二、第三个字节为掩码，每一位分别控制后面16个字节对应的被制定控对象是否要更改。状态字与控制字类似，是微控制器根据相同的算法生成的一组16进制数据，上传给微信小程序，解算成为热水器的状态参数，显示出来，其首字节为固定数据，表示开始一个新的状态字，第二、第三个字节为掩码，每一位分别控制后面16个字节对应的状态参数是否要更新。
在本发明的一个实施例中，所述的热水器可以是卫浴电热水器，也可以是其他热水器。热水器具有储水容器、混水阀等本体组件。
在本发明的一个实施例中，所述的人机交互模块能在本地提供水温水位时间信息，用户可在没有网络的环境中实现本地使用。
在本发明的一个实施例中，所述的无线模块通过家庭网关与服务器、微信小程序终端交换数据。
所述的无线模块能加载TCP/IP协议；
所述的家庭网关能需要提供DDNS服务；
所述的服务器须具有公网IP地址；
所述的微信小程序能运行Request-API、解析状态字、打包控制字；
所述的微信小程序能展示远程热水器能在本地显示的所有信息；
所述的微信小程序能控制远程热水器能被本地控制的所有设备。
本发明的一个实施例中，所述的热水器能添加使用着子账号，实现自定义个性化使用。
本发明的一个实施例中，所述的热水器能实现恒温出水，低水位自动上水，高水位停止上水。
所述的恒温出水功能，是基于用户使用数据，并结合本地或者远程设置的参数计算所得。如果在本地用按键选择用户一，则向服务器请求相关的数据并返回控制字给微处理器，微处理器显示偏好温度，历史使用温度、用水量信息；驱动继电器实现动作。如果用户二在微信上查询到当前热水器在使用中，则可发出预约信息，微处理器同样地执行上述动作。如果用户在使用中对出水温度感觉不适，处理器记录使用数据，服务器保留一段时间的历史信息，并生成最新的数据。小程序每天或者每周或者每月向用户提交使用报告
所述的低水位自动上水功能，是针对太阳能热水器或者其他非承压式的或者不具备适时上水功能的电热水器设计。
本发明的一个实施例中，所述的热水器可以监控用户的用水量，显示到微信小程序中，动态地规划每天需要的使用量，按需加热，达到节约能源的目的。
本发明的一个实施例中，所述的热水器远程职能控制系统，小程序每天或者每周或者每月向用户提交使用报告。



